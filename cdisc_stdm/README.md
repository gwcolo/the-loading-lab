# SDTM Demo – Loading Lab

This folder contains a demo for working with **CDISC SDTM (Study Data Tabulation Model)** datasets.  
It is part of the **Loading Lab** repository, which provides lightweight demos for different kinds of lab data (microscopy, RNAseq, FCS, mass spec, etc.).  
Although SDTM comes from the clinical trial world and differs from typical wet‑lab datasets, it is included here because:

1. SDTM does contain *laboratory test data* (e.g. hematology, chemistry, urinalysis).  
2. There is growing interest in connecting **clinical trial standards (SDTM/ADaM)** with other biomedical data sources.  
3. It is useful to understand how regulatory data standards are structured, even if your main focus is experimental lab work.  
4. I'm human and didn't want to spin up a new repo to maintain right now.

---

## Background

The **Clinical Data Interchange Standards Consortium (CDISC)** publishes data models for regulatory submission of clinical trial data.  
- **SDTM** (Study Data Tabulation Model) is the standardized format for raw clinical trial tabulations.  
- **ADaM** (Analysis Data Model) builds on SDTM to provide analysis‑ready datasets.  

This demo uses the **CDISC Pilot 01 (updated 2018)** SDTM data, made publicly available by PHUSE:  
<https://github.com/phuse-org/phuse-scripts/blob/master/data/sdtm/cdiscpilot_update2.zip>

The original CDISC pilot project is described here:  
<http://www.cdisc.org/sdtmadam-pilot-project>

---

## Data Contents

The raw datasets are provided in **SAS XPORT (.xpt)** format – the FDA‑required standard for electronic submission.  
They include demographics, adverse events, concomitant medications, disposition, labs, vitals, questionnaires, trial design datasets, and more.  

Example files in `data/raw/` include:

- `dm.xpt` – Demographics  
- `ae.xpt` – Adverse Events  
- `vs.xpt` – Vital Signs  
- `lbch.xpt`, `lbhe.xpt`, `lbur.xpt` – Laboratory data (Chemistry, Hematology, Urinalysis)  
- `mh.xpt` – Medical History  
- `cm.xpt` – Concomitant Medications  
- `qs*.xpt` – Questionnaires (various instruments)  
- `define.xml` – Metadata describing all variables and datasets  

The `figures/` folder contains sample plots generated by the demo notebook, such as previews of datasets, counts of patients per site, and quantile summaries of labs and vital signs.

---

## How to Get the Data

You can download the updated **CDISC Pilot 01 SDTM data** directly from PHUSE:  
<https://github.com/phuse-org/phuse-scripts/blob/master/data/sdtm/cdiscpilot_update2.zip>

You do *not* need to download the entire PHUSE repository. You can extract just the SDTM folder (`cdiscpilot01`) using Subversion or a zip download.

---

## Notebook Workflow

The notebook [`01_load_stdm_xpt_files.ipynb`](notebooks/01_load_stdm_xpt_files.ipynb) demonstrates how to:

1. Load `.xpt` files into Python using `pyreadstat`.  
2. Inspect the structure of datasets (subjects, visits, parameters, values).  
3. Create small preview tables and plots, such as:  
   - Distribution of subjects across study sites.  
   - Time series of vital signs.  
   - Quantiles of laboratory tests (e.g. bilirubin).  

This demo is intentionally lightweight: it does **not** build ADaM datasets or create regulatory tables/figures.  
It is only meant to show how SDTM data can be accessed and explored.

---

## Dependencies

To install the environment, use the included `environment.yml` file:

```bash
conda env create -f environment.yml
conda activate cdisc-stdm-demo
```

This environment includes the main libraries for working with XPT files, dataframes, and plots.

---

## Relation to ADaM Demo

This SDTM demo is complemented by a separate **ADaM demo** folder within the Loading Lab repository.  
Together they highlight key differences between the two standards:  

- **SDTM** is focused on standardized *tabulations* of collected data.  
- **ADaM** is designed to support *statistical analysis*.  

Seeing both side‑by‑side helps illustrate how clinical trial data flows from collection (SDTM) to analysis (ADaM).

---

## Disclaimer

⚠️ **Educational Use Only**  
This demo is provided for learning purposes only.  
- It is **not** suitable for regulatory submission.  
- It does not generate CDISC‑compliant tables, listings, or figures.  
- The goal is simply to show where to obtain example SDTM data and how to load it into Python.

---

## References & Resources

- [CDISC SDTM Standards](https://www.cdisc.org/standards/foundational/sdtm)  
- [CDISC ADaM Standards](https://www.cdisc.org/standards/foundational/adam)  
- [PHUSE SDTM Pilot Data](https://github.com/phuse-org/phuse-scripts/tree/master/data/sdtm)  
- [FDA Study Data Standards Resources](https://www.fda.gov/industry/study-data-standards-resources)

